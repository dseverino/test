{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\src\\\\components\\\\Dialog\\\\ConfirmationDialogRaw.js\";\nimport React from \"react\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport FormLabel from '@material-ui/core/FormLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport TextField from '@material-ui/core/TextField';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport Button from '@material-ui/core/Button';\n\nvar ConfirmationDialogRaw = function ConfirmationDialogRaw(props) {\n  var onClose = props.onClose,\n      open = props.open,\n      onHorseAdded = props.onHorseAdded,\n      raceId = props.raceId,\n      other = _objectWithoutProperties(props, [\"onClose\", \"open\", \"onHorseAdded\", \"raceId\"]);\n\n  var _React$useState = React.useState({\n    name: \"\",\n    selectedHorse: null,\n    E: true,\n    F: true,\n    G: false,\n    Gs: false,\n    LA: false,\n    B: true,\n    L: false\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      values = _React$useState2[0],\n      setValues = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    jockey: \"\",\n    date: props.date,\n    jockeyWeight: \"\",\n    trainer: \"\",\n    stable: \"\",\n    horseWeight: 0,\n    startingPosition: props.horsesqty,\n    raceNumber: props.racenumber,\n    horseEquipments: [\"E\", \"F\"],\n    horseMedications: [\"B\"],\n    horseAge: 0,\n    distance: props.distance,\n    claiming: \"\"\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      horseRaceDetail = _React$useState4[0],\n      setHorseRaceDetail = _React$useState4[1];\n\n  var _React$useState5 = React.useState([]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      horses = _React$useState6[0],\n      setHorses = _React$useState6[1];\n\n  var jockeys = props.jockeys.map(function (jockey) {\n    return {\n      label: jockey.name,\n      value: jockey._id\n    };\n  });\n  var stables = props.stables.map(function (stable) {\n    return {\n      label: stable.name,\n      value: stable._id\n    };\n  });\n  var trainers = props.trainers.map(function (trainer) {\n    return {\n      label: trainer.name,\n      value: trainer._id\n    };\n  });\n  var claimings = props.claimings.map(function (claiming) {\n    return {\n      label: claiming,\n      value: claiming\n    };\n  });\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      loading = _React$useState8[0],\n      setLoading = _React$useState8[1];\n\n  function handleCancel() {\n    clearValues();\n    onClose();\n  }\n\n  function clearValues() {\n    setValues({\n      name: \"\",\n      selectedHorse: null,\n      E: true,\n      F: true,\n      G: false,\n      Gs: false,\n      LA: false,\n      B: true,\n      L: false\n    });\n    setHorseRaceDetail({\n      jockey: \"\",\n      date: props.date,\n      jockeyWeight: \"\",\n      trainer: \"\",\n      stable: \"\",\n      horseWeight: \"\",\n      startingPosition: props.horsesqty,\n      raceNumber: props.racenumber,\n      horseEquipments: [\"E\", \"F\"],\n      horseMedications: [\"B\"],\n      horseAge: 0,\n      distance: props.distance\n    });\n    setHorses([]);\n  }\n\n  function handleAdd() {\n    setLoading(true);\n    var requestBody = {\n      query: \"\\n        mutation CreateHorseRaceDetail($horseRaceDetail: HorseRaceDetailInput, $horseId: ID){\\n          createHorseRaceDetail(horseRaceDetail: $horseRaceDetail, horseId: $horseId){\\n            _id\\n            startingPosition          \\n          }  \\n        }          \\n      \",\n      variables: {\n        horseRaceDetail: horseRaceDetail,\n        horseId: values.selectedHorse._id\n      }\n    };\n    fetch(\"http://localhost:3000/graphql\", {\n      method: 'POST',\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (result) {\n      if (result.status !== 200 && result.status !== 201) {\n        throw new Error(\"Failed\");\n      }\n\n      return result.json();\n    }).then(function (resData) {\n      onHorseAdded(props.index, raceId, values.selectedHorse);\n      handleCancel();\n    }).catch(function (error) {\n      console.log(error);\n      setLoading(false);\n    });\n  }\n\n  var handleChange = function handleChange(name) {\n    return function (event) {\n      setValues(_objectSpread({}, values, _defineProperty({}, name, event.target.value)));\n    };\n  };\n\n  function fetchHorses() {\n    setLoading(true);\n    var requestBody = {\n      query: \"\\n        query Horse($name: String){\\n          horse(name: $name) {\\n            _id\\n            name\\n            weight\\n            age\\n            color\\n            sex\\n            sire\\n            dam\\n            stable {         \\n              _id\\n              name\\n              trainers {\\n                _id\\n                name\\n              }\\n            }            \\n          }\\n        }\\n      \",\n      variables: {\n        name: values.name\n      }\n    };\n    fetch(\"http://localhost:3000/graphql\", {\n      method: 'POST',\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (result) {\n      if (result.status !== 200 && result.status !== 201) {\n        throw new Error(\"Failed\");\n      }\n\n      return result.json();\n    }).then(function (resData) {\n      setHorses(resData.data.horse);\n      setValues(_objectSpread({}, values, _defineProperty({}, \"selectedHorse\", null)));\n      setHorseRaceDetail({\n        jockey: \"\",\n        date: props.date,\n        jockeyWeight: \"\",\n        trainer: \"\",\n        stable: \"\",\n        horseWeight: \"\",\n        startingPosition: props.horsesqty,\n        raceNumber: props.racenumber,\n        horseEquipments: [\"E\", \"F\"],\n        horseMedications: [\"B\"],\n        horseAge: 0,\n        distance: props.distance\n      });\n    }).catch(function (error) {\n      console.log(error);\n      setLoading(false);\n    });\n  }\n\n  var onEquipMedicationChange = function onEquipMedicationChange(name, col) {\n    return function (event) {\n      if (event.target.checked) {\n        horseRaceDetail[col].push(name);\n        setValues(_objectSpread({}, values, _defineProperty({}, name, true)));\n      } else {\n        horseRaceDetail[col].splice(horseRaceDetail[col].indexOf(name), 1);\n        setValues(_objectSpread({}, values, _defineProperty({}, name, false)));\n      }\n    };\n  };\n\n  var onHorseSelectionChange = function onHorseSelectionChange(e) {\n    setValues(_objectSpread({}, values, {\n      \"selectedHorse\": e.value\n    }));\n    setHorseRaceDetail(_objectSpread({}, horseRaceDetail, {\n      horseAge: e.value.age,\n      stable: e.value.stable._id,\n      trainer: e.value.stable.trainers && e.value.stable.trainers.length === 1 ? e.value.stable.trainers[0]._id : \"\",\n      claiming: props.claimings.length === 1 ? props.claimings[0] : \"\"\n    }));\n  };\n  /*React.useEffect(() => {    \r\n    if(horseRaceDetail.stable && values.selectedHorse.stable.trainers && values.selectedHorse.stable.trainers === 1){\r\n      setHorseRaceDetail({...horseRaceDetail, trainer: values.selectedHorse.stable.trainers[0]._id});\r\n    }   \r\n  }, [horseRaceDetail.stable])*/\n\n\n  React.useEffect(function () {\n    if (values.selectedHorse) {\n      setHorseRaceDetail(_objectSpread({}, horseRaceDetail, {\n        horseWeight: values.selectedHorse.weight ? values.selectedHorse.weight : \"\"\n      }));\n    }\n  }, [values.selectedHorse]);\n\n  var onStableSelection = function onStableSelection(e) {\n    var _objectSpread6;\n\n    var trainers = values.selectedHorse.stable.trainers;\n    setHorseRaceDetail(_objectSpread({}, horseRaceDetail, (_objectSpread6 = {}, _defineProperty(_objectSpread6, \"stable\", e.value), _defineProperty(_objectSpread6, \"trainer\", trainers.length === 1 ? trainers[0]._id : \"\"), _objectSpread6)));\n  };\n\n  return React.createElement(Dialog, Object.assign({\n    disableBackdropClick: true,\n    disableEscapeKeyDown: true,\n    maxWidth: \"md\",\n    \"aria-labelledby\": \"confirmation-dialog-title\",\n    open: open\n  }, other, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }), React.createElement(DialogTitle, {\n    id: \"confirmation-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, \"Add Horse\"), React.createElement(DialogContent, {\n    dividers: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    id: \"standard-search\",\n    label: \"Horse Name\",\n    type: \"search\",\n    margin: \"normal\",\n    value: values.name,\n    onChange: handleChange('name'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }), React.createElement(Button, {\n    variant: \"outlined\",\n    onClick: fetchHorses,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, \"Search\")), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, horses.length > 0 && React.createElement(DataTable, {\n    value: horses,\n    selectionMode: \"single\",\n    selection: values.selectedHorse,\n    onSelectionChange: onHorseSelectionChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, React.createElement(Column, {\n    selectionMode: \"single\",\n    style: {\n      width: '3em'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }), React.createElement(Column, {\n    field: \"name\",\n    header: \"Name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }), React.createElement(Column, {\n    field: \"age\",\n    header: \"Age\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240\n    },\n    __self: this\n  }), React.createElement(Column, {\n    field: \"sex\",\n    header: \"Sex\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  })), values.selectedHorse && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247\n    },\n    __self: this\n  }, \"Starting Position \", React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, props.horsesqty)), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251\n    },\n    __self: this\n  }, \"Jockey\"), React.createElement(Dropdown, {\n    options: jockeys,\n    filter: true,\n    value: horseRaceDetail.jockey,\n    onChange: function onChange(e) {\n      return setHorseRaceDetail(_objectSpread({}, horseRaceDetail, _defineProperty({}, \"jockey\", e.value)));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    id: \"jockeyweight\",\n    label: \"Jockey Weight\",\n    type: \"number\",\n    onChange: function onChange(e) {\n      return setHorseRaceDetail(_objectSpread({}, horseRaceDetail, _defineProperty({}, \"jockeyWeight\", Number(e.target.value))));\n    },\n    keyfilter: \"pint\",\n    value: horseRaceDetail.jockeyWeight,\n    margin: \"normal\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }, \"Stable\"), React.createElement(Dropdown, {\n    options: stables,\n    filter: true,\n    value: horseRaceDetail.stable,\n    onChange: onStableSelection,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263\n    },\n    __self: this\n  }, \"Trainer\"), React.createElement(Dropdown, {\n    options: trainers,\n    filter: true,\n    value: horseRaceDetail.trainer,\n    onChange: function onChange(e) {\n      return setHorseRaceDetail(_objectSpread({}, horseRaceDetail, _defineProperty({}, \"trainer\", e.value)));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    id: \"weight\",\n    label: \"Weight\",\n    type: \"number\",\n    onChange: function onChange(e) {\n      return setHorseRaceDetail(_objectSpread({}, horseRaceDetail, {\n        \"horseWeight\": Number(e.target.value)\n      }));\n    },\n    keyfilter: \"pint\",\n    value: horseRaceDetail.horseWeight,\n    margin: \"normal\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"col-md-3 mb-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271\n    },\n    __self: this\n  }, \"Claiming\"), React.createElement(Dropdown, {\n    options: claimings,\n    filter: true,\n    value: horseRaceDetail.claiming,\n    onChange: function onChange(e) {\n      return setHorseRaceDetail(_objectSpread({}, horseRaceDetail, {\n        \"claiming\": e.value\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272\n    },\n    __self: this\n  })), React.createElement(FormControl, {\n    component: \"fieldset\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    component: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275\n    },\n    __self: this\n  }, \"Horse Equipments\"), React.createElement(FormGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.E,\n      onChange: onEquipMedicationChange(\"E\", \"horseEquipments\"),\n      value: \"E\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }),\n    label: \"E\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.F,\n      onChange: onEquipMedicationChange(\"F\", \"horseEquipments\"),\n      value: \"F\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }),\n    label: \"F\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.G,\n      onChange: onEquipMedicationChange(\"G\", \"horseEquipments\"),\n      value: \"G\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }),\n    label: \"G\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.Gs,\n      onChange: onEquipMedicationChange(\"Gs\", \"horseEquipments\"),\n      value: \"Gs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }),\n    label: \"Gs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.LA,\n      onChange: onEquipMedicationChange(\"LA\", \"horseEquipments\"),\n      value: \"LA\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }),\n    label: \"LA\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }))), React.createElement(FormControl, {\n    component: \"fieldset\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, React.createElement(FormLabel, {\n    component: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303\n    },\n    __self: this\n  }, \"Horse Medications\"), React.createElement(FormGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304\n    },\n    __self: this\n  }, React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.L,\n      onChange: onEquipMedicationChange(\"L\", \"horseMedications\"),\n      value: \"L\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }),\n    label: \"L\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305\n    },\n    __self: this\n  }), React.createElement(FormControlLabel, {\n    control: React.createElement(Checkbox, {\n      checked: values.B,\n      onChange: onEquipMedicationChange(\"B\", \"horseMedications\"),\n      value: \"B\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }),\n    label: \"B\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309\n    },\n    __self: this\n  })))))), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: handleCancel,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  }, \"Cancel\"), React.createElement(Button, {\n    onClick: handleAdd,\n    color: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326\n    },\n    __self: this\n  }, \"Add\")));\n};\n\nexport default ConfirmationDialogRaw;","map":{"version":3,"sources":["C:\\Users\\Domingo\\Desktop\\Git Projects\\test\\frontend\\src\\components\\Dialog\\ConfirmationDialogRaw.js"],"names":["React","Dropdown","FormLabel","FormControl","FormGroup","FormControlLabel","Checkbox","Dialog","DialogTitle","DialogContent","DialogActions","TextField","DataTable","Column","Button","ConfirmationDialogRaw","props","onClose","open","onHorseAdded","raceId","other","useState","name","selectedHorse","E","F","G","Gs","LA","B","L","values","setValues","jockey","date","jockeyWeight","trainer","stable","horseWeight","startingPosition","horsesqty","raceNumber","racenumber","horseEquipments","horseMedications","horseAge","distance","claiming","horseRaceDetail","setHorseRaceDetail","horses","setHorses","jockeys","map","label","value","_id","stables","trainers","claimings","loading","setLoading","handleCancel","clearValues","handleAdd","requestBody","query","variables","horseId","fetch","method","body","JSON","stringify","headers","then","result","status","Error","json","resData","index","catch","error","console","log","handleChange","event","target","fetchHorses","data","horse","onEquipMedicationChange","col","checked","push","splice","indexOf","onHorseSelectionChange","e","age","length","useEffect","weight","onStableSelection","width","Number"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,QAAP,MAAqB,4BAArB;AAGA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAASC,SAAT,QAA0B,sBAA1B;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;AAEA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,KAAD,EAAW;AAAA,MAE/BC,OAF+B,GAEmBD,KAFnB,CAE/BC,OAF+B;AAAA,MAEtBC,IAFsB,GAEmBF,KAFnB,CAEtBE,IAFsB;AAAA,MAEhBC,YAFgB,GAEmBH,KAFnB,CAEhBG,YAFgB;AAAA,MAEFC,MAFE,GAEmBJ,KAFnB,CAEFI,MAFE;AAAA,MAESC,KAFT,4BAEmBL,KAFnB;;AAAA,wBAIXhB,KAAK,CAACsB,QAAN,CAAe;AACzCC,IAAAA,IAAI,EAAE,EADmC;AAEzCC,IAAAA,aAAa,EAAE,IAF0B;AAGzCC,IAAAA,CAAC,EAAE,IAHsC;AAIzCC,IAAAA,CAAC,EAAE,IAJsC;AAKzCC,IAAAA,CAAC,EAAE,KALsC;AAMzCC,IAAAA,EAAE,EAAE,KANqC;AAOzCC,IAAAA,EAAE,EAAE,KAPqC;AAQzCC,IAAAA,CAAC,EAAE,IARsC;AASzCC,IAAAA,CAAC,EAAE;AATsC,GAAf,CAJW;AAAA;AAAA,MAIhCC,MAJgC;AAAA,MAIxBC,SAJwB;;AAAA,yBAeOjC,KAAK,CAACsB,QAAN,CAAe;AAC3DY,IAAAA,MAAM,EAAE,EADmD;AAE3DC,IAAAA,IAAI,EAAEnB,KAAK,CAACmB,IAF+C;AAG3DC,IAAAA,YAAY,EAAE,EAH6C;AAI3DC,IAAAA,OAAO,EAAE,EAJkD;AAK3DC,IAAAA,MAAM,EAAE,EALmD;AAM3DC,IAAAA,WAAW,EAAE,CAN8C;AAO3DC,IAAAA,gBAAgB,EAAExB,KAAK,CAACyB,SAPmC;AAQ3DC,IAAAA,UAAU,EAAE1B,KAAK,CAAC2B,UARyC;AAS3DC,IAAAA,eAAe,EAAE,CAAC,GAAD,EAAM,GAAN,CAT0C;AAU3DC,IAAAA,gBAAgB,EAAE,CAAC,GAAD,CAVyC;AAW3DC,IAAAA,QAAQ,EAAE,CAXiD;AAY3DC,IAAAA,QAAQ,EAAE/B,KAAK,CAAC+B,QAZ2C;AAa3DC,IAAAA,QAAQ,EAAE;AAbiD,GAAf,CAfP;AAAA;AAAA,MAehCC,eAfgC;AAAA,MAefC,kBAfe;;AAAA,yBA8BXlD,KAAK,CAACsB,QAAN,CAAe,EAAf,CA9BW;AAAA;AAAA,MA8BhC6B,MA9BgC;AAAA,MA8BxBC,SA9BwB;;AAgCvC,MAAMC,OAAO,GAAGrC,KAAK,CAACqC,OAAN,CAAcC,GAAd,CAAkB,UAAApB,MAAM,EAAI;AAC1C,WAAO;AAAEqB,MAAAA,KAAK,EAAErB,MAAM,CAACX,IAAhB;AAAsBiC,MAAAA,KAAK,EAAEtB,MAAM,CAACuB;AAApC,KAAP;AACD,GAFe,CAAhB;AAGA,MAAMC,OAAO,GAAG1C,KAAK,CAAC0C,OAAN,CAAcJ,GAAd,CAAkB,UAAAhB,MAAM,EAAI;AAC1C,WAAO;AAAEiB,MAAAA,KAAK,EAAEjB,MAAM,CAACf,IAAhB;AAAsBiC,MAAAA,KAAK,EAAElB,MAAM,CAACmB;AAApC,KAAP;AACD,GAFe,CAAhB;AAGA,MAAME,QAAQ,GAAG3C,KAAK,CAAC2C,QAAN,CAAeL,GAAf,CAAmB,UAAAjB,OAAO,EAAI;AAC7C,WAAO;AAAEkB,MAAAA,KAAK,EAAElB,OAAO,CAACd,IAAjB;AAAuBiC,MAAAA,KAAK,EAAEnB,OAAO,CAACoB;AAAtC,KAAP;AACD,GAFgB,CAAjB;AAGA,MAAMG,SAAS,GAAG5C,KAAK,CAAC4C,SAAN,CAAgBN,GAAhB,CAAoB,UAAAN,QAAQ,EAAI;AAChD,WAAO;AAAEO,MAAAA,KAAK,EAAEP,QAAT;AAAmBQ,MAAAA,KAAK,EAAER;AAA1B,KAAP;AACD,GAFiB,CAAlB;;AAzCuC,yBA6CThD,KAAK,CAACsB,QAAN,CAAe,KAAf,CA7CS;AAAA;AAAA,MA6ChCuC,OA7CgC;AAAA,MA6CvBC,UA7CuB;;AA+CvC,WAASC,YAAT,GAAwB;AACtBC,IAAAA,WAAW;AACX/C,IAAAA,OAAO;AACR;;AAED,WAAS+C,WAAT,GAAuB;AACrB/B,IAAAA,SAAS,CAAC;AAAEV,MAAAA,IAAI,EAAE,EAAR;AAAYC,MAAAA,aAAa,EAAE,IAA3B;AAAiCC,MAAAA,CAAC,EAAE,IAApC;AAA0CC,MAAAA,CAAC,EAAE,IAA7C;AAAmDC,MAAAA,CAAC,EAAE,KAAtD;AAA6DC,MAAAA,EAAE,EAAE,KAAjE;AAAwEC,MAAAA,EAAE,EAAE,KAA5E;AAAmFC,MAAAA,CAAC,EAAE,IAAtF;AAA4FC,MAAAA,CAAC,EAAE;AAA/F,KAAD,CAAT;AACAmB,IAAAA,kBAAkB,CAAC;AAAEhB,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,IAAI,EAAEnB,KAAK,CAACmB,IAA1B;AAAgCC,MAAAA,YAAY,EAAE,EAA9C;AAAkDC,MAAAA,OAAO,EAAE,EAA3D;AAA+DC,MAAAA,MAAM,EAAE,EAAvE;AAA2EC,MAAAA,WAAW,EAAE,EAAxF;AAA4FC,MAAAA,gBAAgB,EAAExB,KAAK,CAACyB,SAApH;AAA+HC,MAAAA,UAAU,EAAE1B,KAAK,CAAC2B,UAAjJ;AAA6JC,MAAAA,eAAe,EAAE,CAAC,GAAD,EAAM,GAAN,CAA9K;AAA0LC,MAAAA,gBAAgB,EAAE,CAAC,GAAD,CAA5M;AAAmNC,MAAAA,QAAQ,EAAE,CAA7N;AAAgOC,MAAAA,QAAQ,EAAE/B,KAAK,CAAC+B;AAAhP,KAAD,CAAlB;AACAK,IAAAA,SAAS,CAAC,EAAD,CAAT;AACD;;AAED,WAASa,SAAT,GAAqB;AACnBH,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAMI,WAAW,GAAG;AAClBC,MAAAA,KAAK,gSADa;AASlBC,MAAAA,SAAS,EAAE;AACTnB,QAAAA,eAAe,EAAEA,eADR;AACyBoB,QAAAA,OAAO,EAAErC,MAAM,CAACR,aAAP,CAAqBiC;AADvD;AATO,KAApB;AAcAa,IAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCC,MAAAA,MAAM,EAAE,MAD6B;AAErCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,WAAf,CAF+B;AAGrCS,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAH4B,KAAlC,CAAL,CAOGC,IAPH,CAOQ,UAAAC,MAAM,EAAI;AACd,UAAIA,MAAM,CAACC,MAAP,KAAkB,GAAlB,IAAyBD,MAAM,CAACC,MAAP,KAAkB,GAA/C,EAAoD;AAClD,cAAM,IAAIC,KAAJ,CAAU,QAAV,CAAN;AACD;;AACD,aAAOF,MAAM,CAACG,IAAP,EAAP;AACD,KAZH,EAaGJ,IAbH,CAaQ,UAAAK,OAAO,EAAI;AACf9D,MAAAA,YAAY,CAACH,KAAK,CAACkE,KAAP,EAAc9D,MAAd,EAAsBY,MAAM,CAACR,aAA7B,CAAZ;AACAuC,MAAAA,YAAY;AACb,KAhBH,EAiBGoB,KAjBH,CAiBS,UAAAC,KAAK,EAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAtB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KApBH;AAqBD;;AAED,MAAMyB,YAAY,GAAG,SAAfA,YAAe,CAAAhE,IAAI;AAAA,WAAI,UAAAiE,KAAK,EAAI;AACpCvD,MAAAA,SAAS,mBAAMD,MAAN,sBAAeT,IAAf,EAAsBiE,KAAK,CAACC,MAAN,CAAajC,KAAnC,GAAT;AACD,KAFwB;AAAA,GAAzB;;AAIA,WAASkC,WAAT,GAAuB;AACrB5B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAMI,WAAW,GAAG;AAClBC,MAAAA,KAAK,+aADa;AAuBlBC,MAAAA,SAAS,EAAE;AACT7C,QAAAA,IAAI,EAAES,MAAM,CAACT;AADJ;AAvBO,KAApB;AA4BA+C,IAAAA,KAAK,CAAC,+BAAD,EAAkC;AACrCC,MAAAA,MAAM,EAAE,MAD6B;AAErCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,WAAf,CAF+B;AAGrCS,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT;AAH4B,KAAlC,CAAL,CAOGC,IAPH,CAOQ,UAAAC,MAAM,EAAI;AACd,UAAIA,MAAM,CAACC,MAAP,KAAkB,GAAlB,IAAyBD,MAAM,CAACC,MAAP,KAAkB,GAA/C,EAAoD;AAClD,cAAM,IAAIC,KAAJ,CAAU,QAAV,CAAN;AACD;;AACD,aAAOF,MAAM,CAACG,IAAP,EAAP;AACD,KAZH,EAaGJ,IAbH,CAaQ,UAAAK,OAAO,EAAI;AACf7B,MAAAA,SAAS,CAAC6B,OAAO,CAACU,IAAR,CAAaC,KAAd,CAAT;AACA3D,MAAAA,SAAS,mBAAMD,MAAN,sBAAe,eAAf,EAAiC,IAAjC,GAAT;AACAkB,MAAAA,kBAAkB,CAAC;AAAEhB,QAAAA,MAAM,EAAE,EAAV;AAAcC,QAAAA,IAAI,EAAEnB,KAAK,CAACmB,IAA1B;AAAgCC,QAAAA,YAAY,EAAE,EAA9C;AAAkDC,QAAAA,OAAO,EAAE,EAA3D;AAA+DC,QAAAA,MAAM,EAAE,EAAvE;AAA2EC,QAAAA,WAAW,EAAE,EAAxF;AAA4FC,QAAAA,gBAAgB,EAAExB,KAAK,CAACyB,SAApH;AAA+HC,QAAAA,UAAU,EAAE1B,KAAK,CAAC2B,UAAjJ;AAA6JC,QAAAA,eAAe,EAAE,CAAC,GAAD,EAAM,GAAN,CAA9K;AAA0LC,QAAAA,gBAAgB,EAAE,CAAC,GAAD,CAA5M;AAAmNC,QAAAA,QAAQ,EAAE,CAA7N;AAAgOC,QAAAA,QAAQ,EAAE/B,KAAK,CAAC+B;AAAhP,OAAD,CAAlB;AACD,KAjBH,EAkBGoC,KAlBH,CAkBS,UAAAC,KAAK,EAAI;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACAtB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KArBH;AAsBD;;AAED,MAAM+B,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACtE,IAAD,EAAOuE,GAAP;AAAA,WAAe,UAAAN,KAAK,EAAI;AACtD,UAAIA,KAAK,CAACC,MAAN,CAAaM,OAAjB,EAA0B;AACxB9C,QAAAA,eAAe,CAAC6C,GAAD,CAAf,CAAqBE,IAArB,CAA0BzE,IAA1B;AACAU,QAAAA,SAAS,mBAAMD,MAAN,sBAAeT,IAAf,EAAsB,IAAtB,GAAT;AACD,OAHD,MAIK;AACH0B,QAAAA,eAAe,CAAC6C,GAAD,CAAf,CAAqBG,MAArB,CAA4BhD,eAAe,CAAC6C,GAAD,CAAf,CAAqBI,OAArB,CAA6B3E,IAA7B,CAA5B,EAAgE,CAAhE;AACAU,QAAAA,SAAS,mBAAMD,MAAN,sBAAeT,IAAf,EAAsB,KAAtB,GAAT;AACD;AACF,KAT+B;AAAA,GAAhC;;AAWA,MAAM4E,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,CAAD,EAAO;AACpCnE,IAAAA,SAAS,mBAAMD,MAAN;AAAc,uBAAiBoE,CAAC,CAAC5C;AAAjC,OAAT;AACAN,IAAAA,kBAAkB,mBAAKD,eAAL;AAAsBH,MAAAA,QAAQ,EAAEsD,CAAC,CAAC5C,KAAF,CAAQ6C,GAAxC;AAA6C/D,MAAAA,MAAM,EAAE8D,CAAC,CAAC5C,KAAF,CAAQlB,MAAR,CAAemB,GAApE;AAAyEpB,MAAAA,OAAO,EAAE+D,CAAC,CAAC5C,KAAF,CAAQlB,MAAR,CAAeqB,QAAf,IAA2ByC,CAAC,CAAC5C,KAAF,CAAQlB,MAAR,CAAeqB,QAAf,CAAwB2C,MAAxB,KAAmC,CAA9D,GAAkEF,CAAC,CAAC5C,KAAF,CAAQlB,MAAR,CAAeqB,QAAf,CAAwB,CAAxB,EAA2BF,GAA7F,GAAmG,EAArL;AAAyLT,MAAAA,QAAQ,EAAEhC,KAAK,CAAC4C,SAAN,CAAgB0C,MAAhB,KAA2B,CAA3B,GAA+BtF,KAAK,CAAC4C,SAAN,CAAgB,CAAhB,CAA/B,GAAoD;AAAvP,OAAlB;AACD,GAHD;AAKA;;;;;;;AAMA5D,EAAAA,KAAK,CAACuG,SAAN,CAAgB,YAAM;AACpB,QAAGvE,MAAM,CAACR,aAAV,EAAwB;AACtB0B,MAAAA,kBAAkB,mBAAKD,eAAL;AAAsBV,QAAAA,WAAW,EAAEP,MAAM,CAACR,aAAP,CAAqBgF,MAArB,GAA8BxE,MAAM,CAACR,aAAP,CAAqBgF,MAAnD,GAA4D;AAA/F,SAAlB;AACD;AACF,GAJD,EAIG,CAACxE,MAAM,CAACR,aAAR,CAJH;;AAMA,MAAMiF,iBAAiB,GAAG,SAApBA,iBAAoB,CAACL,CAAD,EAAO;AAAA;;AAC/B,QAAMzC,QAAQ,GAAG3B,MAAM,CAACR,aAAP,CAAqBc,MAArB,CAA4BqB,QAA7C;AACAT,IAAAA,kBAAkB,mBAAMD,eAAN,wDAAwB,QAAxB,EAAmCmD,CAAC,CAAC5C,KAArC,mCAA6C,SAA7C,EAAyDG,QAAQ,CAAC2C,MAAT,KAAoB,CAApB,GAAwB3C,QAAQ,CAAC,CAAD,CAAR,CAAYF,GAApC,GAA0C,EAAnG,oBAAlB;AACD,GAHD;;AAKA,SACE,oBAAC,MAAD;AACE,IAAA,oBAAoB,MADtB;AAEE,IAAA,oBAAoB,MAFtB;AAGE,IAAA,QAAQ,EAAC,IAHX;AAIE,uBAAgB,2BAJlB;AAKE,IAAA,IAAI,EAAEvC;AALR,KAMMG,KANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQE,oBAAC,WAAD;AAAa,IAAA,EAAE,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARF,EASE,oBAAC,aAAD;AAAe,IAAA,QAAQ,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AACE,IAAA,EAAE,EAAC,iBADL;AAEE,IAAA,KAAK,EAAC,YAFR;AAGE,IAAA,IAAI,EAAC,QAHP;AAIE,IAAA,MAAM,EAAC,QAJT;AAKE,IAAA,KAAK,EAAEW,MAAM,CAACT,IALhB;AAME,IAAA,QAAQ,EAAEgE,YAAY,CAAC,MAAD,CANxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAWE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,UAAhB;AAA2B,IAAA,OAAO,EAAEG,WAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAXF,CADF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIvC,MAAM,CAACmD,MAAP,GAAgB,CAAhB,IACA,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEnD,MAAlB;AAA0B,IAAA,aAAa,EAAC,QAAxC;AAAiD,IAAA,SAAS,EAAEnB,MAAM,CAACR,aAAnE;AAAkF,IAAA,iBAAiB,EAAE2E,sBAArG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,aAAa,EAAC,QAAtB;AAA+B,IAAA,KAAK,EAAE;AAAEO,MAAAA,KAAK,EAAE;AAAT,KAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,MAAd;AAAqB,IAAA,MAAM,EAAC,MAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAoB,IAAA,MAAM,EAAC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,KAAd;AAAoB,IAAA,MAAM,EAAC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAHJ,EAWI1E,MAAM,CAACR,aAAP,IACA,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASR,KAAK,CAACyB,SAAf,CADpB,CADF,EAIE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAEY,OAAnB;AAA4B,IAAA,MAAM,EAAE,IAApC;AAA0C,IAAA,KAAK,EAAEJ,eAAe,CAACf,MAAjE;AAAyE,IAAA,QAAQ,EAAE,kBAAAkE,CAAC;AAAA,aAAIlD,kBAAkB,mBAAMD,eAAN,sBAAwB,QAAxB,EAAmCmD,CAAC,CAAC5C,KAArC,GAAtB;AAAA,KAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAJF,EAQE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,EAAE,EAAC,cAAd;AACE,IAAA,KAAK,EAAC,eADR;AACwB,IAAA,IAAI,EAAC,QAD7B;AACsC,IAAA,QAAQ,EAAE,kBAAA4C,CAAC;AAAA,aAAIlD,kBAAkB,mBAAMD,eAAN,sBAAwB,cAAxB,EAAyC0D,MAAM,CAACP,CAAC,CAACX,MAAF,CAASjC,KAAV,CAA/C,GAAtB;AAAA,KADjD;AAC2I,IAAA,SAAS,EAAC,MADrJ;AAC4J,IAAA,KAAK,EAAEP,eAAe,CAACb,YADnL;AACiM,IAAA,MAAM,EAAC,QADxM;AACiN,IAAA,OAAO,EAAC,UADzN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CARF,EAYE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAEsB,OAAnB;AAA4B,IAAA,MAAM,EAAE,IAApC;AAA0C,IAAA,KAAK,EAAET,eAAe,CAACX,MAAjE;AAAyE,IAAA,QAAQ,EAAEmE,iBAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAZF,EAgBE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EAEE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAE9C,QAAnB;AAA6B,IAAA,MAAM,EAAE,IAArC;AAA2C,IAAA,KAAK,EAAEV,eAAe,CAACZ,OAAlE;AAA2E,IAAA,QAAQ,EAAE,kBAAA+D,CAAC;AAAA,aAAIlD,kBAAkB,mBAAMD,eAAN,sBAAwB,SAAxB,EAAoCmD,CAAC,CAAC5C,KAAtC,GAAtB;AAAA,KAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAhBF,EAoBE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,EAAE,EAAC,QAAd;AACE,IAAA,KAAK,EAAC,QADR;AACiB,IAAA,IAAI,EAAC,QADtB;AAC+B,IAAA,QAAQ,EAAE,kBAAA4C,CAAC;AAAA,aAAIlD,kBAAkB,mBAAMD,eAAN;AAAuB,uBAAe0D,MAAM,CAACP,CAAC,CAACX,MAAF,CAASjC,KAAV;AAA5C,SAAtB;AAAA,KAD1C;AACiI,IAAA,SAAS,EAAC,MAD3I;AACkJ,IAAA,KAAK,EAAEP,eAAe,CAACV,WADzK;AACsL,IAAA,MAAM,EAAC,QAD7L;AACsM,IAAA,OAAO,EAAC,UAD9M;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CApBF,EAwBE;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAEE,oBAAC,QAAD;AAAU,IAAA,OAAO,EAAEqB,SAAnB;AAA8B,IAAA,MAAM,EAAE,IAAtC;AAA4C,IAAA,KAAK,EAAEX,eAAe,CAACD,QAAnE;AAA6E,IAAA,QAAQ,EAAE,kBAAAoD,CAAC;AAAA,aAAIlD,kBAAkB,mBAAMD,eAAN;AAAuB,oBAAYmD,CAAC,CAAC5C;AAArC,SAAtB;AAAA,KAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAxBF,EA4BE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,gBAAD;AACE,IAAA,OAAO,EAAE,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAExB,MAAM,CAACP,CAA1B;AAA6B,MAAA,QAAQ,EAAEoE,uBAAuB,CAAC,GAAD,EAAM,iBAAN,CAA9D;AAAwF,MAAA,KAAK,EAAC,GAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADX;AAEE,IAAA,KAAK,EAAC,GAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,oBAAC,gBAAD;AACE,IAAA,OAAO,EAAE,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACN,CAA1B;AAA6B,MAAA,QAAQ,EAAEmE,uBAAuB,CAAC,GAAD,EAAM,iBAAN,CAA9D;AAAwF,MAAA,KAAK,EAAC,GAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADX;AAEE,IAAA,KAAK,EAAC,GAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EASE,oBAAC,gBAAD;AACE,IAAA,OAAO,EACL,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACL,CAA1B;AAA6B,MAAA,QAAQ,EAAEkE,uBAAuB,CAAC,GAAD,EAAM,iBAAN,CAA9D;AAAwF,MAAA,KAAK,EAAC,GAA9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AAGE,IAAA,KAAK,EAAC,GAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,EAcE,oBAAC,gBAAD;AACE,IAAA,OAAO,EACL,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACJ,EAA1B;AAA8B,MAAA,QAAQ,EAAEiE,uBAAuB,CAAC,IAAD,EAAO,iBAAP,CAA/D;AAA0F,MAAA,KAAK,EAAC,IAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AAGE,IAAA,KAAK,EAAC,IAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,EAmBE,oBAAC,gBAAD;AACE,IAAA,OAAO,EACL,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACH,EAA1B;AAA8B,MAAA,QAAQ,EAAEgE,uBAAuB,CAAC,IAAD,EAAO,iBAAP,CAA/D;AAA0F,MAAA,KAAK,EAAC,IAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AAGE,IAAA,KAAK,EAAC,IAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnBF,CAFF,CA5BF,EAwDE,oBAAC,WAAD;AAAa,IAAA,SAAS,EAAC,UAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,QAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,EAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,gBAAD;AACE,IAAA,OAAO,EAAE,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACD,CAA1B;AAA6B,MAAA,QAAQ,EAAE8D,uBAAuB,CAAC,GAAD,EAAM,kBAAN,CAA9D;AAAyF,MAAA,KAAK,EAAC,GAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADX;AAEE,IAAA,KAAK,EAAC,GAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAKE,oBAAC,gBAAD;AACE,IAAA,OAAO,EAAE,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE7D,MAAM,CAACF,CAA1B;AAA6B,MAAA,QAAQ,EAAE+D,uBAAuB,CAAC,GAAD,EAAM,kBAAN,CAA9D;AAAyF,MAAA,KAAK,EAAC,GAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADX;AAEE,IAAA,KAAK,EAAC,GAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CAFF,CAxDF,CAZJ,CAhBF,CATF,EAiHE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE9B,YAAjB;AAA+B,IAAA,KAAK,EAAC,SAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAIE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEE,SAAjB;AAA4B,IAAA,KAAK,EAAC,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJF,CAjHF,CADF;AA4HD,CAxTD;;AA0TA,eAAelD,qBAAf","sourcesContent":["import React from \"react\";\r\n\r\nimport { Dropdown } from \"primereact/dropdown\";\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\n\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { DataTable } from 'primereact/datatable';\r\nimport { Column } from 'primereact/column';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst ConfirmationDialogRaw = (props) => {  \r\n\r\n  const { onClose, open, onHorseAdded, raceId, ...other } = props;\r\n\r\n  const [values, setValues] = React.useState({\r\n    name: \"\",\r\n    selectedHorse: null,\r\n    E: true,\r\n    F: true,\r\n    G: false,\r\n    Gs: false,\r\n    LA: false,\r\n    B: true,\r\n    L: false\r\n  });\r\n  const [horseRaceDetail, setHorseRaceDetail] = React.useState({\r\n    jockey: \"\",\r\n    date: props.date,\r\n    jockeyWeight: \"\",\r\n    trainer: \"\",\r\n    stable: \"\",\r\n    horseWeight: 0,\r\n    startingPosition: props.horsesqty,\r\n    raceNumber: props.racenumber,\r\n    horseEquipments: [\"E\", \"F\"],\r\n    horseMedications: [\"B\"],\r\n    horseAge: 0,\r\n    distance: props.distance,\r\n    claiming: \"\"\r\n  });\r\n  const [horses, setHorses] = React.useState([]);\r\n  \r\n  const jockeys = props.jockeys.map(jockey => {\r\n    return { label: jockey.name, value: jockey._id }\r\n  })\r\n  const stables = props.stables.map(stable => {\r\n    return { label: stable.name, value: stable._id }\r\n  })\r\n  const trainers = props.trainers.map(trainer => {\r\n    return { label: trainer.name, value: trainer._id }\r\n  })\r\n  const claimings = props.claimings.map(claiming => {\r\n    return { label: claiming, value: claiming }\r\n  })\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  function handleCancel() {\r\n    clearValues()\r\n    onClose();\r\n  }\r\n\r\n  function clearValues() {\r\n    setValues({ name: \"\", selectedHorse: null, E: true, F: true, G: false, Gs: false, LA: false, B: true, L: false })\r\n    setHorseRaceDetail({ jockey: \"\", date: props.date, jockeyWeight: \"\", trainer: \"\", stable: \"\", horseWeight: \"\", startingPosition: props.horsesqty, raceNumber: props.racenumber, horseEquipments: [\"E\", \"F\"], horseMedications: [\"B\"], horseAge: 0, distance: props.distance });\r\n    setHorses([])\r\n  }\r\n\r\n  function handleAdd() {\r\n    setLoading(true);\r\n    const requestBody = {\r\n      query: `\r\n        mutation CreateHorseRaceDetail($horseRaceDetail: HorseRaceDetailInput, $horseId: ID){\r\n          createHorseRaceDetail(horseRaceDetail: $horseRaceDetail, horseId: $horseId){\r\n            _id\r\n            startingPosition          \r\n          }  \r\n        }          \r\n      `,\r\n      variables: {\r\n        horseRaceDetail: horseRaceDetail, horseId: values.selectedHorse._id\r\n      }\r\n    }\r\n\r\n    fetch(\"http://localhost:3000/graphql\", {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(result => {\r\n        if (result.status !== 200 && result.status !== 201) {\r\n          throw new Error(\"Failed\")\r\n        }\r\n        return result.json()\r\n      })\r\n      .then(resData => {        \r\n        onHorseAdded(props.index, raceId, values.selectedHorse);\r\n        handleCancel();\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, [name]: event.target.value });\r\n  }\r\n\r\n  function fetchHorses() {\r\n    setLoading(true);\r\n    const requestBody = {\r\n      query: `\r\n        query Horse($name: String){\r\n          horse(name: $name) {\r\n            _id\r\n            name\r\n            weight\r\n            age\r\n            color\r\n            sex\r\n            sire\r\n            dam\r\n            stable {         \r\n              _id\r\n              name\r\n              trainers {\r\n                _id\r\n                name\r\n              }\r\n            }            \r\n          }\r\n        }\r\n      `,\r\n      variables: {\r\n        name: values.name\r\n      }\r\n    }\r\n\r\n    fetch(\"http://localhost:3000/graphql\", {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(result => {\r\n        if (result.status !== 200 && result.status !== 201) {\r\n          throw new Error(\"Failed\")\r\n        }\r\n        return result.json()\r\n      })\r\n      .then(resData => {\r\n        setHorses(resData.data.horse);\r\n        setValues({ ...values, [\"selectedHorse\"]: null });\r\n        setHorseRaceDetail({ jockey: \"\", date: props.date, jockeyWeight: \"\", trainer: \"\", stable: \"\", horseWeight: \"\", startingPosition: props.horsesqty, raceNumber: props.racenumber, horseEquipments: [\"E\", \"F\"], horseMedications: [\"B\"], horseAge: 0, distance: props.distance });\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        setLoading(false);\r\n      })\r\n  }\r\n\r\n  const onEquipMedicationChange = (name, col) => event => {\r\n    if (event.target.checked) {\r\n      horseRaceDetail[col].push(name);\r\n      setValues({ ...values, [name]: true });\r\n    }\r\n    else {\r\n      horseRaceDetail[col].splice(horseRaceDetail[col].indexOf(name), 1);\r\n      setValues({ ...values, [name]: false });\r\n    }\r\n  }\r\n\r\n  const onHorseSelectionChange = (e) => {\r\n    setValues({ ...values, \"selectedHorse\": e.value });\r\n    setHorseRaceDetail({...horseRaceDetail, horseAge: e.value.age, stable: e.value.stable._id, trainer: e.value.stable.trainers && e.value.stable.trainers.length === 1 ? e.value.stable.trainers[0]._id : \"\", claiming: props.claimings.length === 1 ? props.claimings[0] : \"\"});\r\n  }\r\n\r\n  /*React.useEffect(() => {    \r\n    if(horseRaceDetail.stable && values.selectedHorse.stable.trainers && values.selectedHorse.stable.trainers === 1){\r\n      setHorseRaceDetail({...horseRaceDetail, trainer: values.selectedHorse.stable.trainers[0]._id});\r\n    }   \r\n  }, [horseRaceDetail.stable])*/\r\n\r\n  React.useEffect(() => {    \r\n    if(values.selectedHorse){\r\n      setHorseRaceDetail({...horseRaceDetail, horseWeight: values.selectedHorse.weight ? values.selectedHorse.weight : \"\"});\r\n    }    \r\n  }, [values.selectedHorse])\r\n\r\n  const onStableSelection = (e) => {\r\n    const trainers = values.selectedHorse.stable.trainers;\r\n    setHorseRaceDetail({ ...horseRaceDetail, [\"stable\"]: e.value, [\"trainer\"]: trainers.length === 1 ? trainers[0]._id : \"\"});\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n      maxWidth=\"md\"\r\n      aria-labelledby=\"confirmation-dialog-title\"\r\n      open={open}\r\n      {...other}\r\n    >\r\n      <DialogTitle id=\"confirmation-dialog-title\">Add Horse</DialogTitle>\r\n      <DialogContent dividers>\r\n        <div>\r\n          <TextField\r\n            id=\"standard-search\"\r\n            label=\"Horse Name\"\r\n            type=\"search\"\r\n            margin=\"normal\"\r\n            value={values.name}\r\n            onChange={handleChange('name')}\r\n          >\r\n          </TextField>\r\n\r\n          <Button variant=\"outlined\" onClick={fetchHorses}>\r\n            Search\r\n            </Button>\r\n        </div>\r\n        <div>\r\n          {\r\n            horses.length > 0 &&\r\n            <DataTable value={horses} selectionMode=\"single\" selection={values.selectedHorse} onSelectionChange={onHorseSelectionChange}>\r\n              <Column selectionMode=\"single\" style={{ width: '3em' }} />\r\n              <Column field=\"name\" header=\"Name\" />\r\n              <Column field=\"age\" header=\"Age\" />\r\n              <Column field=\"sex\" header=\"Sex\" />\r\n            </DataTable>\r\n          }\r\n          {\r\n            values.selectedHorse &&\r\n            <React.Fragment>\r\n              <div className=\"col-md-3 mb-3\">\r\n                Starting Position <strong>{props.horsesqty}</strong>\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label>Jockey</label>\r\n                <Dropdown options={jockeys} filter={true} value={horseRaceDetail.jockey} onChange={e => setHorseRaceDetail({ ...horseRaceDetail, [\"jockey\"]: e.value })} />\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <TextField id=\"jockeyweight\"\r\n                  label=\"Jockey Weight\" type=\"number\" onChange={e => setHorseRaceDetail({ ...horseRaceDetail, [\"jockeyWeight\"]: Number(e.target.value) })} keyfilter=\"pint\" value={horseRaceDetail.jockeyWeight} margin=\"normal\" variant=\"outlined\" />\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label>Stable</label>\r\n                <Dropdown options={stables} filter={true} value={horseRaceDetail.stable} onChange={onStableSelection} />\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label>Trainer</label>\r\n                <Dropdown options={trainers} filter={true} value={horseRaceDetail.trainer} onChange={e => setHorseRaceDetail({ ...horseRaceDetail, [\"trainer\"]: e.value })} />\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <TextField id=\"weight\"\r\n                  label=\"Weight\" type=\"number\" onChange={e => setHorseRaceDetail({ ...horseRaceDetail, \"horseWeight\": Number(e.target.value) })} keyfilter=\"pint\" value={horseRaceDetail.horseWeight} margin=\"normal\" variant=\"outlined\" />\r\n              </div>\r\n              <div className=\"col-md-3 mb-3\">\r\n                <label>Claiming</label>\r\n                <Dropdown options={claimings} filter={true} value={horseRaceDetail.claiming} onChange={e => setHorseRaceDetail({ ...horseRaceDetail, \"claiming\": e.value })} />\r\n              </div>\r\n              <FormControl component=\"fieldset\">\r\n                <FormLabel component=\"legend\">Horse Equipments</FormLabel>\r\n                <FormGroup>\r\n                  <FormControlLabel\r\n                    control={<Checkbox checked={values.E} onChange={onEquipMedicationChange(\"E\", \"horseEquipments\")} value=\"E\" />}\r\n                    label=\"E\"\r\n                  />\r\n                  <FormControlLabel\r\n                    control={<Checkbox checked={values.F} onChange={onEquipMedicationChange(\"F\", \"horseEquipments\")} value=\"F\" />}\r\n                    label=\"F\"\r\n                  />\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox checked={values.G} onChange={onEquipMedicationChange(\"G\", \"horseEquipments\")} value=\"G\" />}\r\n                    label=\"G\"\r\n                  />\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox checked={values.Gs} onChange={onEquipMedicationChange(\"Gs\", \"horseEquipments\")} value=\"Gs\" />}\r\n                    label=\"Gs\"\r\n                  />\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox checked={values.LA} onChange={onEquipMedicationChange(\"LA\", \"horseEquipments\")} value=\"LA\" />}\r\n                    label=\"LA\"\r\n                  />\r\n                </FormGroup>\r\n              </FormControl>\r\n              <FormControl component=\"fieldset\">\r\n                <FormLabel component=\"legend\">Horse Medications</FormLabel>\r\n                <FormGroup>\r\n                  <FormControlLabel\r\n                    control={<Checkbox checked={values.L} onChange={onEquipMedicationChange(\"L\", \"horseMedications\")} value=\"L\" />}\r\n                    label=\"L\"\r\n                  />\r\n                  <FormControlLabel\r\n                    control={<Checkbox checked={values.B} onChange={onEquipMedicationChange(\"B\", \"horseMedications\")} value=\"B\" />}\r\n                    label=\"B\"\r\n                  />\r\n                </FormGroup>\r\n              </FormControl>\r\n\r\n            </React.Fragment>\r\n          }\r\n\r\n        </div>\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={handleCancel} color=\"primary\">\r\n          Cancel\r\n          </Button>\r\n        <Button onClick={handleAdd} color=\"primary\">\r\n          Add\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  )\r\n}\r\n\r\nexport default ConfirmationDialogRaw;"]},"metadata":{},"sourceType":"module"}