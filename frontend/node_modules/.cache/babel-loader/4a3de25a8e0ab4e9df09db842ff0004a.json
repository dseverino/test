{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\Domingo\\\\Desktop\\\\Git Projects\\\\test\\\\frontend\\\\src\\\\pages\\\\Horse\\\\CreateHorse.js\";\nimport React, { Component } from \"react\";\nimport AuthContext from \"../../context/auth-context\";\nimport Spinner from \"../../components/Spinner/Spinner\";\nimport modal from \"../../components/Modal/Modal\";\nimport { Dropdown } from 'primereact/dropdown';\nimport { Dialog } from 'primereact/dialog';\nimport { Fieldset } from 'primereact/fieldset';\nimport Icon from '@material-ui/core/Icon'; //import \"../pages/Horses.css\";\n\nvar CreateHorsePage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateHorsePage, _Component);\n\n  function CreateHorsePage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CreateHorsePage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CreateHorsePage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      creating: false,\n      horses: [],\n      isLoading: false,\n      exist: false,\n      visible: false,\n      createHorse: false,\n      created: false,\n      selectedStable: null,\n      stables: [],\n      horse: {\n        name: \"\",\n        weight: \"\",\n        age: 3,\n        color: \"Z\",\n        sex: \"M\",\n        sire: \"\",\n        dam: \"\",\n        stable: \"\"\n      }\n    };\n    _this.isActive = true;\n\n    _this.startCreateHorse = function () {\n      _this.setState({\n        exist: true\n      });\n    };\n\n    _this.onCancelHandler = function (event) {\n      console.log(_this.state.horse);\n    };\n\n    _this.modalCancelHandler = function (event) {\n      _this.setState({\n        creating: false,\n        exist: false,\n        created: false\n      });\n\n      _this.setState({\n        horse: {\n          name: \"\",\n          weight: 0,\n          age: 3,\n          color: \"Z\",\n          sex: \"M\",\n          sire: \"\",\n          dam: \"\"\n        }\n      });\n\n      document.getElementById(\"name\").focus();\n    };\n\n    _this.onHandleChange = function (e) {\n      var newHorse = Object.assign({}, _this.state.horse);\n      newHorse[e.target.id] = e.target.value;\n\n      _this.setState({\n        horse: newHorse\n      });\n    };\n\n    _this.onAgeChangeHandler = function (e) {\n      var newHorse = Object.assign({}, _this.state.horse);\n      newHorse[e.target.id] = parseInt(e.target.value);\n\n      _this.setState({\n        horse: newHorse\n      });\n    };\n\n    _this.onStableChangeHandler = function (e) {\n      var newHorse = Object.assign({}, _this.state.horse);\n      newHorse[e.target.id] = e.target.value._id;\n\n      _this.setState({\n        selectedStable: e.target.value,\n        horse: newHorse\n      });\n    };\n\n    _this.validateHorse = function () {\n      if (!_this.state.horse.name) {\n        return false;\n      }\n\n      _this.setState({\n        isLoading: true\n      });\n\n      var requestBody = {\n        query: \"\\n        query SingleHorse($name: String!) {\\n          singleHorse(name: $name) {\\n            name\\n            weight\\n            age\\n            color\\n            sex\\n            sire\\n            dam\\n          }\\n        }\\n      \",\n        variables: {\n          name: _this.state.horse.name\n        }\n      };\n      fetch(\"http://localhost:3000/graphql\", {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (result) {\n        if (result.status !== 200 && result.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n\n        return result.json();\n      }).then(function (resData) {\n        if (resData && resData.data.singleHorse) {\n          _this.setState({\n            exist: true,\n            isLoading: false\n          });\n        } else {\n          _this.setState({\n            isLoading: false\n          });\n\n          document.getElementById(\"weight\").focus();\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.saveHandler = function (event) {\n      _this.setState({\n        isLoading: true\n      });\n\n      var requestBody = {\n        query: \"\\n        mutation CreateHorse($horse: HorseInput) {\\n          createHorse(horseInput: $horse) {\\n            _id\\n            name\\n            weight\\n            age\\n            color\\n            sex\\n            sire\\n            dam\\n          }\\n        }\\n      \",\n        variables: {\n          horse: _this.state.horse\n        }\n      };\n      var token = _this.context.token;\n      fetch(\"http://localhost:3000/graphql\", {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Authorization\": \"Bearer \".concat(token),\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (result) {\n        if (result.status !== 200 && result.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n\n        return result.json();\n      }).then(function (resData) {\n        _this.setState({\n          created: true,\n          selectedStable: null,\n          isLoading: false\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.onAddIconClick = function (e) {\n      _this.setState({\n        createHorse: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CreateHorsePage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadStables();\n    }\n  }, {\n    key: \"loadStables\",\n    value: function loadStables() {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true\n      });\n      var requestBody = {\n        query: \"\\n        query {\\n          stables {\\n            _id\\n            name\\n          }\\n        }\\n      \"\n      };\n      fetch(\"http://localhost:3000/graphql\", {\n        method: 'POST',\n        body: JSON.stringify(requestBody),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (result) {\n        if (result.status !== 200 && result.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n\n        return result.json();\n      }).then(function (resData) {\n        if (resData && resData.data.stables) {\n          _this2.setState({\n            stables: resData.data.stables,\n            isLoading: false\n          });\n        } else {\n          _this2.setState({\n            isLoading: false\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Fieldset, {\n        legend: \"Create Horse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: {\n          display: \"flex\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, \"Name\"), React.createElement(\"input\", {\n        type: \"text\",\n        onBlur: this.validateHorse,\n        className: \"form-control\",\n        onChange: this.onHandleChange,\n        id: \"name\",\n        value: this.state.horse.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"weight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, \"Weight\"), React.createElement(\"input\", {\n        type: \"number\",\n        className: \"form-control\",\n        onChange: this.onAgeChangeHandler,\n        id: \"weight\",\n        value: this.state.horse.weight,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"age\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Age\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        onChange: this.onAgeChangeHandler,\n        id: \"age\",\n        value: this.state.horse.age,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"2\"), React.createElement(\"option\", {\n        value: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"3\"), React.createElement(\"option\", {\n        value: \"4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"4\"), React.createElement(\"option\", {\n        value: \"5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, \"5\"), React.createElement(\"option\", {\n        value: \"6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"6\"), React.createElement(\"option\", {\n        value: \"7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, \"7\"), React.createElement(\"option\", {\n        value: \"8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"8\"), React.createElement(\"option\", {\n        value: \"9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      }, \"9\"), React.createElement(\"option\", {\n        value: \"10\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"10\"), React.createElement(\"option\", {\n        value: \"11\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, \"11\"), React.createElement(\"option\", {\n        value: \"12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, \"12\"), React.createElement(\"option\", {\n        value: \"13\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, \"13\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"sex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, \"Color\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        onChange: this.onHandleChange,\n        id: \"color\",\n        value: this.state.horse.color,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"Z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Z\"), React.createElement(\"option\", {\n        value: \"Zo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Zo\"), React.createElement(\"option\", {\n        value: \"A\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"A\"), React.createElement(\"option\", {\n        value: \"R\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        },\n        __self: this\n      }, \"R\"), React.createElement(\"option\", {\n        value: \"Ro\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }, \"Ro\")))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"sex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Sex\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        id: \"sex\",\n        value: this.state.horse.sex,\n        onChange: this.onHandleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"M\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, \"M\"), React.createElement(\"option\", {\n        value: \"Mc\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"Mc\"), React.createElement(\"option\", {\n        value: \"H\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, \"H\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"sire\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }, \"Sire\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        onChange: this.onHandleChange,\n        id: \"sire\",\n        value: this.state.horse.sire,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"dam\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, \"Dam\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        onChange: this.onHandleChange,\n        id: \"dam\",\n        value: this.state.horse.dam,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"column\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"stable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280\n        },\n        __self: this\n      }, \"Stable\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        id: \"stable\",\n        optionLabel: \"name\",\n        filter: true,\n        value: this.state.selectedStable,\n        options: this.state.stables,\n        onChange: this.onStableChangeHandler,\n        placeholder: \"Select a Stable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        style: {\n          marginBottom: \"-14px\"\n        },\n        color: \"disabled\",\n        fontSize: \"large\",\n        onClick: this.onAddIconClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, \"add_circle\"))))))), React.createElement(\"button\", {\n        onClick: this.onCancelHandler,\n        className: \"btn btn-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293\n        },\n        __self: this\n      }, \"Cancel\"), React.createElement(\"button\", {\n        onClick: this.saveHandler,\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Save\"), React.createElement(Dialog, {\n        header: \"Horse Exists!\",\n        visible: this.state.exist,\n        style: {\n          width: '50vw'\n        },\n        modal: true,\n        onHide: this.modalCancelHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, this.state.horse.name, \" already exists!\"), React.createElement(Dialog, {\n        header: this.state.horse.name + \" Created!\",\n        visible: this.state.created,\n        style: {\n          width: '50vw'\n        },\n        modal: true,\n        onHide: this.modalCancelHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, \"Name: \", this.state.horse.name), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, \"Age: \", this.state.horse.age), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311\n        },\n        __self: this\n      }, \"Color: \", this.state.horse.color), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, \"Sex: \", this.state.horse.sex), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, \"Sire: \", this.state.horse.sire), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, \"Dam: \", this.state.horse.dam))), this.state.createHorse && React.createElement(\"modal\", {\n        title: \"Create Horse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328\n        },\n        __self: this\n      }, \"Horse\")), this.state.isLoading && React.createElement(Spinner, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return CreateHorsePage;\n}(Component);\n\nCreateHorsePage.contextType = AuthContext;\nexport default CreateHorsePage;","map":{"version":3,"sources":["C:\\Users\\Domingo\\Desktop\\Git Projects\\test\\frontend\\src\\pages\\Horse\\CreateHorse.js"],"names":["React","Component","AuthContext","Spinner","modal","Dropdown","Dialog","Fieldset","Icon","CreateHorsePage","state","creating","horses","isLoading","exist","visible","createHorse","created","selectedStable","stables","horse","name","weight","age","color","sex","sire","dam","stable","isActive","startCreateHorse","setState","onCancelHandler","event","console","log","modalCancelHandler","document","getElementById","focus","onHandleChange","e","newHorse","Object","assign","target","id","value","onAgeChangeHandler","parseInt","onStableChangeHandler","_id","validateHorse","requestBody","query","variables","fetch","method","body","JSON","stringify","headers","then","result","status","Error","json","resData","data","singleHorse","catch","error","saveHandler","token","context","onAddIconClick","loadStables","display","flexDirection","marginBottom","width","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport AuthContext from \"../../context/auth-context\";\r\nimport Spinner from \"../../components/Spinner/Spinner\";\r\nimport modal from \"../../components/Modal/Modal\";\r\n\r\nimport { Dropdown } from 'primereact/dropdown';\r\nimport { Dialog } from 'primereact/dialog';\r\nimport { Fieldset } from 'primereact/fieldset';\r\n\r\nimport Icon from '@material-ui/core/Icon';\r\n//import \"../pages/Horses.css\";\r\n\r\nclass CreateHorsePage extends Component {\r\n  static contextType = AuthContext\r\n\r\n  state = {\r\n    creating: false,\r\n    horses: [],\r\n    isLoading: false,\r\n    exist: false,\r\n    visible: false,\r\n    createHorse: false,\r\n    created: false,\r\n    selectedStable: null,\r\n    stables: [],\r\n    horse: {\r\n      name: \"\",\r\n      weight: \"\",\r\n      age: 3,\r\n      color: \"Z\",\r\n      sex: \"M\",\r\n      sire: \"\",\r\n      dam: \"\",\r\n      stable: \"\"\r\n    }\r\n  }\r\n  isActive = true;\r\n\r\n  componentDidMount() {\r\n    this.loadStables();\r\n  }\r\n\r\n  loadStables() {\r\n    this.setState({ isLoading: true })\r\n    const requestBody = {\r\n      query: `\r\n        query {\r\n          stables {\r\n            _id\r\n            name\r\n          }\r\n        }\r\n      `\r\n    }\r\n    fetch(\"http://localhost:3000/graphql\", {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(result => {\r\n        if (result.status !== 200 && result.status !== 201) {\r\n          throw new Error(\"Failed\")\r\n        }\r\n        return result.json()\r\n      })\r\n      .then(resData => {\r\n        if (resData && resData.data.stables) {\r\n          this.setState({ stables: resData.data.stables, isLoading: false })\r\n        }\r\n        else {\r\n          this.setState({ isLoading: false })\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  startCreateHorse = () => {\r\n    this.setState({ exist: true })\r\n  }\r\n\r\n  onCancelHandler = (event) => {\r\n    console.log(this.state.horse)\r\n  }\r\n\r\n  modalCancelHandler = (event) => {\r\n    this.setState({ creating: false, exist: false, created: false })\r\n    this.setState({\r\n      horse: {\r\n        name: \"\",\r\n        weight: 0,\r\n        age: 3,\r\n        color: \"Z\",\r\n        sex: \"M\",\r\n        sire: \"\",\r\n        dam: \"\"\r\n      }\r\n    })\r\n    document.getElementById(\"name\").focus();\r\n  }\r\n  onHandleChange = (e) => {\r\n    let newHorse = Object.assign({}, this.state.horse)\r\n    newHorse[e.target.id] = e.target.value\r\n    this.setState({ horse: newHorse })\r\n  }\r\n  onAgeChangeHandler = (e) => {\r\n    let newHorse = Object.assign({}, this.state.horse)\r\n    newHorse[e.target.id] = parseInt(e.target.value)\r\n    this.setState({ horse: newHorse })\r\n  }\r\n  onStableChangeHandler = (e) => {\r\n    let newHorse = Object.assign({}, this.state.horse)\r\n    newHorse[e.target.id] = e.target.value._id\r\n    this.setState({ selectedStable: e.target.value, horse: newHorse });\r\n  }\r\n  validateHorse = () => {\r\n    if (!this.state.horse.name) {\r\n      return false;\r\n    }\r\n    this.setState({ isLoading: true })\r\n    const requestBody = {\r\n      query: `\r\n        query SingleHorse($name: String!) {\r\n          singleHorse(name: $name) {\r\n            name\r\n            weight\r\n            age\r\n            color\r\n            sex\r\n            sire\r\n            dam\r\n          }\r\n        }\r\n      `,\r\n      variables: {\r\n        name: this.state.horse.name\r\n      }\r\n    }\r\n    fetch(\"http://localhost:3000/graphql\", {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n      headers: {\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(result => {\r\n        if (result.status !== 200 && result.status !== 201) {\r\n          throw new Error(\"Failed\")\r\n        }\r\n        return result.json()\r\n      })\r\n      .then(resData => {\r\n        if (resData && resData.data.singleHorse) {\r\n          this.setState({ exist: true, isLoading: false })\r\n        }\r\n        else {\r\n          this.setState({ isLoading: false })\r\n          document.getElementById(\"weight\").focus();\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n  saveHandler = (event) => {\r\n\r\n    this.setState({ isLoading: true })\r\n    const requestBody = {\r\n      query: `\r\n        mutation CreateHorse($horse: HorseInput) {\r\n          createHorse(horseInput: $horse) {\r\n            _id\r\n            name\r\n            weight\r\n            age\r\n            color\r\n            sex\r\n            sire\r\n            dam\r\n          }\r\n        }\r\n      `,\r\n      variables: {\r\n        horse: this.state.horse\r\n      }\r\n    }\r\n\r\n    const token = this.context.token\r\n\r\n    fetch(\"http://localhost:3000/graphql\", {\r\n      method: 'POST',\r\n      body: JSON.stringify(requestBody),\r\n      headers: {\r\n        \"Authorization\": `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\"\r\n      }\r\n    })\r\n      .then(result => {\r\n        if (result.status !== 200 && result.status !== 201) {\r\n          throw new Error(\"Failed\")\r\n        }\r\n        return result.json()\r\n      })\r\n      .then(resData => {\r\n        this.setState({ created: true, selectedStable: null, isLoading: false })\r\n      })\r\n      .catch(error => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  onAddIconClick = (e) => {\r\n    this.setState({createHorse: true})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Fieldset legend=\"Create Horse\">\r\n          <form style={{ display: \"flex\" }}>\r\n            <div>\r\n              <div>\r\n                <label htmlFor=\"name\">Name</label>\r\n                <input type=\"text\" onBlur={this.validateHorse} className=\"form-control\" onChange={this.onHandleChange} id=\"name\" value={this.state.horse.name} />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"weight\">Weight</label>\r\n                <input type=\"number\" className=\"form-control\" onChange={this.onAgeChangeHandler} id=\"weight\" value={this.state.horse.weight} />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"age\">Age</label>\r\n                <select className=\"form-control\" onChange={this.onAgeChangeHandler} id=\"age\" value={this.state.horse.age}>\r\n                  <option value=\"2\">2</option>\r\n                  <option value=\"3\">3</option>\r\n                  <option value=\"4\">4</option>\r\n                  <option value=\"5\">5</option>\r\n                  <option value=\"6\">6</option>\r\n                  <option value=\"7\">7</option>\r\n                  <option value=\"8\">8</option>\r\n                  <option value=\"9\">9</option>\r\n                  <option value=\"10\">10</option>\r\n                  <option value=\"11\">11</option>\r\n                  <option value=\"12\">12</option>\r\n                  <option value=\"13\">13</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"sex\">Color</label>\r\n                <select className=\"form-control\" onChange={this.onHandleChange} id=\"color\" value={this.state.horse.color}>\r\n                  <option value=\"Z\">Z</option>\r\n                  <option value=\"Zo\">Zo</option>\r\n                  <option value=\"A\">A</option>\r\n                  <option value=\"R\">R</option>\r\n                  <option value=\"Ro\">Ro</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div>\r\n                <label htmlFor=\"sex\">Sex</label>\r\n                <select className=\"form-control\" id=\"sex\" value={this.state.horse.sex} onChange={this.onHandleChange}>\r\n                  <option value=\"M\">M</option>\r\n                  <option value=\"Mc\">Mc</option>\r\n                  <option value=\"H\">H</option>\r\n                </select>\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"sire\">Sire</label>\r\n                <input type=\"text\" className=\"form-control\" onChange={this.onHandleChange} id=\"sire\" value={this.state.horse.sire} />\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"dam\">Dam</label>\r\n                <input type=\"text\" className=\"form-control\" onChange={this.onHandleChange} id=\"dam\" value={this.state.horse.dam} />\r\n              </div>\r\n              <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n                <label htmlFor=\"stable\">Stable</label>\r\n                <div>\r\n                  <Dropdown id=\"stable\" optionLabel=\"name\" filter={true} value={this.state.selectedStable} options={this.state.stables} onChange={this.onStableChangeHandler} placeholder=\"Select a Stable\" />\r\n                  <span>\r\n                    <Icon style={{marginBottom: \"-14px\"}} color=\"disabled\" fontSize=\"large\" onClick={this.onAddIconClick}>\r\n                      add_circle\r\n                    </Icon>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </Fieldset>\r\n        <button onClick={this.onCancelHandler} className=\"btn btn-secondary\">\r\n          Cancel\r\n        </button>\r\n        <button onClick={this.saveHandler} className=\"btn btn-primary\">\r\n          Save\r\n        </button>\r\n\r\n        <Dialog header=\"Horse Exists!\" visible={this.state.exist} style={{ width: '50vw' }} modal={true} onHide={this.modalCancelHandler}>\r\n          {this.state.horse.name} already exists!\r\n        </Dialog>\r\n        <Dialog header={this.state.horse.name + \" Created!\"} visible={this.state.created} style={{ width: '50vw' }} modal={true} onHide={this.modalCancelHandler}>\r\n          <div>\r\n            <div>\r\n              Name: {this.state.horse.name}\r\n            </div>\r\n            <div>\r\n              Age: {this.state.horse.age}\r\n            </div>\r\n            <div>\r\n              Color: {this.state.horse.color}\r\n            </div>\r\n            <div>\r\n              Sex: {this.state.horse.sex}\r\n            </div>\r\n            <div>\r\n              Sire: {this.state.horse.sire}\r\n            </div>\r\n            <div>\r\n              Dam: {this.state.horse.dam}\r\n            </div>\r\n          </div>\r\n        </Dialog>\r\n        {\r\n          this.state.createHorse &&\r\n          <modal title=\"Create Horse\">\r\n            <h1>Horse</h1>\r\n          </modal>\r\n        }\r\n        \r\n        {\r\n          this.state.isLoading && <Spinner />\r\n        }\r\n      </React.Fragment >\r\n    );\r\n  }\r\n}\r\n\r\nexport default CreateHorsePage\r\n"]},"metadata":{},"sourceType":"module"}